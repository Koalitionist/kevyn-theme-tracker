{%- comment -%} Auto Generated Variables start {%- endcomment -%}
{%- liquid
  assign image = section.settings.image
  assign image__overlay = section.settings.image__overlay
  assign image__order = section.settings.image__order
  assign review_font = section.settings.review_font
  assign author_font = section.settings.author_font
  assign style = section.settings.style
  assign responsive_visibility = section.settings.responsive_visibility
  assign padding_top = section.settings.padding_top
  assign padding_bottom = section.settings.padding_bottom
  assign color_scheme = section.settings.color_scheme
  assign sectionID = section.settings.sectionID
-%}
{%- comment -%} Auto Generated Variables end {%- endcomment -%}

{% liquid

  assign scrollWrapperClasses = ""
  assign scrollContainerClasses = "scroll-pl-4 md:scroll-pl-[max(2rem,calc((100%-var(--layout-page-width)+4rem)/2))] px-4 md:px-[max(2rem,calc((100%-var(--layout-page-width)+4rem)/2))]"

  case style
    when 'slider'
      assign stackClasses = 'max-lg:!hidden'
      assign sliderClasses = 'lg:!hidden'
    when 'stack'
      assign stackClasses = ''
      assign sliderClasses = '!hidden'
  endcase
%}


<div id="{{ sectionID }}"
     class="featured-reviews container-bg-full {{ color_scheme }} {{ padding_top }} {{ padding_bottom }} {{ responsive_visibility }} {{ stackClasses }}">
  <div class="grid lg:grid-cols-[5fr_4fr] gap-6 ">
    <section class="lg:container h-full w-full flex flex-col justify-center">
      <div class="grid gap-5">
        {% for block in section.blocks %}
          {% render 'featured-reviews.review', block: block, forloop: forloop, id_index: 1 %}
        {% endfor %}
      </div>
    </section>
    <section class="flex-1 w-full flex items-center justify-center overflow-hidden {{ image__order }}">
      <picture class="relative grid flex-1 pb-[100%]">
        {% render '_image', image: image, width: 1200, placeholder: 'product-4', class: 'absolute inset-0 w-full h-full object-cover' %}
      </picture>
    </section>
  </div>
</div>

<section class="relative block {{ color_scheme }} {{ padding_top }} {{ padding_bottom }} {{ responsive_visibility }} {{ sliderClasses }}"
         data-scroll-slider>
  <main class="{{ scrollWrapperClasses }} {{ centerProductsClasses }}">
    <div class="grid grid-flow-col-dense auto-cols-auto w-min max-w-full gap-6 overflow-x-auto pb-8 snap-mandatory snap-x w-full scrollbar-none {{ scrollContainerClasses }}"
         data-scroll-container>
      {% for block in section.blocks %}
        {% render 'featured-reviews.review', block: block, forloop: forloop, html_attributes: "data-scroll-item", class: "group relative block w-[calc(((var(--layout-page-width)-64px)/3)-16px)] max-w-[calc(100vw-32px)]", id_index: 2 %}
      {% endfor %}
    </div>
  </main>

  <footer data-scroll-controls
          class="hidden select-none container relative">
    <div class="relative">
      {% render 'scroll-bar-elements', element: 'scrollbar' %}
    </div>
  </footer>
</section>

{% schema %}
{
  "name": "Featured reviews",
  "settings": [
    {
      "type": "header",
      "content": "Image"
    },
    {
      "type": "image_picker",
      "id": "image",
      "label": "Image"
    },
    {
      "type": "color_background",
      "id": "image__overlay",
      "label": "Overlay",
      "default": "linear-gradient(134deg, rgba(0, 0, 0, 0.1), rgba(0, 0, 0, 0.05) 100%)"
    },
    {
      "type": "radio",
      "id": "image__order",
      "label": "Layout",
      "default": "-order-1",
      "options": [
        {
          "value": "-order-1",
          "label": "Image on the left"
        },
        {
          "value": "-order-1 lg:order-2",
          "label": "Image on the right"
        }
      ]
    },
    {
      "type": "header",
      "content": "Typography"
    },
    {
      "type": "range",
      "id": "review_font",
      "label": "Review Font",
      "default": 1,
      "min": 1,
      "max": 3,
      "step": 1,
      "info": "Typography Groups 1 - 3"
    },
    {
      "type": "range",
      "id": "author_font",
      "label": "Author Font",
      "default": 1,
      "min": 1,
      "max": 3,
      "step": 1,
      "info": "Typography Groups 1 - 3"
    },
    {
      "type": "header",
      "content": "Layout"
    },
    {
      "type": "radio",
      "id": "style",
      "label": "Mobile Style",
      "default": "slider",
      "options": [
        {
          "value": "slider",
          "label": "Slider"
        },
        {
          "value": "stack",
          "label": "Stack"
        }
      ]
    },
    {
      "type": "radio",
      "id": "responsive_visibility",
      "label": "Responsive Visibility",
      "default": "responsive",
      "options": [
        {
          "value": "responsive",
          "label": "Mobile & Desktop"
        },
        {
          "value": "md:hidden",
          "label": "Mobile only"
        },
        {
          "value": "max-md:hidden",
          "label": "Desktop only"
        }
      ]
    },
    {
      "type": "select",
      "id": "padding_top",
      "default": "pt-0",
      "options": [
        {
          "value": "pt-0",
          "label": "None"
        },
        {
          "value": "pt-sm",
          "label": "Small"
        },
        {
          "value": "pt-md",
          "label": "Medium"
        },
        {
          "value": "pt-lg",
          "label": "Large"
        }
      ],
      "label": "Top Padding"
    },
    {
      "type": "select",
      "id": "padding_bottom",
      "default": "pb-0",
      "options": [
        {
          "value": "pb-0",
          "label": "None"
        },
        {
          "value": "pb-sm",
          "label": "Small"
        },
        {
          "value": "pb-md",
          "label": "Medium"
        },
        {
          "value": "pb-lg",
          "label": "Large"
        }
      ],
      "label": "Bottom Padding"
    },
    {
      "type": "select",
      "id": "color_scheme",
      "default": "bg-theme-bg text-theme-text color-inherit",
      "options": [
        {
          "value": "bg-theme-bg text-theme-text color-inherit",
          "label": "Inherit from parent/theme"
        },
        {
          "value": "bg-theme-bg text-theme-text color-group-1",
          "label": "Color group 1"
        },
        {
          "value": "bg-theme-bg text-theme-text color-group-2",
          "label": "Color group 2"
        },
        {
          "value": "bg-theme-bg text-theme-text color-group-3",
          "label": "Color group 3"
        },
        {
          "value": "bg-theme-bg text-theme-text color-group-4",
          "label": "Color group 4"
        },
        {
          "value": "bg-theme-bg text-theme-text color-group-5",
          "label": "Color group 5"
        }
      ],
      "label": "Color scheme"
    },
    {
      "type": "text",
      "id": "sectionID",
      "label": "Section ID"
    }
  ],
  "max_blocks": 3,
  "blocks": [
    {
      "name": "Review",
      "type": "review",
      "settings": [
        {
          "type": "range",
          "id": "rating",
          "label": "Rating",
          "default": 5,
          "min": 1,
          "max": 5,
          "step": 1
        },
        {
          "type": "richtext",
          "id": "review",
          "label": "Review",
          "default": "<p>Meeseeks are not born into this world fumbling for meaning, Jerry! We are created to serve a single purpose, for which we go to any lengths to fulfill.</p>"
        },
        {
          "type": "richtext",
          "id": "author",
          "label": "Author",
          "default": "<p>Marvin Berry</p>"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Featured Reviews",
      "settings": {
        "image__overlay": "linear-gradient(134deg, rgba(0, 0, 0, 0.1), rgba(0, 0, 0, 0.05) 100%)",
        "image__order": "-order-1 lg:order-2",
        "review_font": 1,
        "author_font": 1,
        "style": "slider",
        "responsive_visibility": "responsive",
        "padding_top": "pt-md",
        "padding_bottom": "pb-md",
        "color_scheme": "bg-theme-bg text-theme-text color-inherit"
      },
      "blocks": [
        {
          "type": "review",
          "settings": {
            "review": "<p>Great, now I have to take over an entire planet because of your stupid boobs.</p>",
            "author": "<p>Abradolf Lincler</p>"
          }
        },
        {
          "type": "review",
          "settings": {
            "rating": 4,
            "review": "<p>There is no god, Summer; gotta rip that band-aid off now you'll thank me later.</p>",
            "author": "<p>Krombopulos Michael</p>"
          }
        },
        {
          "type": "review",
          "settings": {
            "review": "<p>Meeseeks are not born into this world fumbling for meaning, Jerry! We are created to serve a single purpose, for which we go to any lengths to fulfill.</p>",
            "author": "<p>Jerry's Mytholog</p>"
          }
        }
      ]
    }
  ]
}
{% endschema %}
