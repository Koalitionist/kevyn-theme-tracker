{%- comment -%} Auto Generated Variables start {%- endcomment -%}
{%- liquid
  assign image__aspect_ratio = section.settings.image__aspect_ratio
  assign min_width = section.settings.min_width
  assign mobile_style = section.settings.mobile_style
  assign spacing = section.settings.spacing
  assign section_layout = section.settings.section_layout
  assign responsive_visibility = section.settings.responsive_visibility
  assign padding_top = section.settings.padding_top
  assign padding_bottom = section.settings.padding_bottom
  assign color_scheme = section.settings.color_scheme
  assign sectionID = section.settings.sectionID
-%}
{%- comment -%} Auto Generated Variables end {%- endcomment -%}

<div id="{{ sectionID }}"
     class="image-feed {{ section_layout }} {{ color_scheme }} {{ padding_top }} {{ padding_bottom }} {{ responsive_visibility }}"
     data-scroll-slider>
  {% case mobile_style %}
    {% when 'stack' %}
      <div class="grid sm:grid-flow-col-dense overflow-x-auto scrollbar-none relative sm:snap-mandatory sm:snap-x sm:auto-cols-[minmax(var(--grid-width-mobile),1fr)] scroll-pl-0"
           style="--grid-width-mobile: {{ min_width }}px; gap: {{ spacing }}px"
           data-scroll-container>
        {% for block in section.blocks %}
          {% render 'image-feed.image', block: block, forloop: forloop %}
        {% endfor %}
      </div>
    {% when 'scroll' %}
      <div class="grid grid-flow-col-dense overflow-x-auto scrollbar-none relative snap-mandatory snap-x auto-cols-[minmax(var(--grid-width-mobile),1fr)] scroll-pl-0"
           style="--grid-width-mobile: {{ min_width }}px; gap: {{ spacing }}px"
           data-scroll-container>
        {% for block in section.blocks %}
          {% render 'image-feed.image', block: block, forloop: forloop %}
        {% endfor %}
      </div>
  {% endcase %}

</div>

{% schema %}
{
  "name": "Image feed",
  "settings": [
    {
      "id": "image__aspect_ratio",
      "type": "select",
      "default": "pb-[100%]",
      "options": [
        {
          "value": "pb-[75%]",
          "label": "Landscape (3:4)"
        },
        {
          "value": "pb-[100%]",
          "label": "Square (1:1)"
        },
        {
          "value": "pb-[125%]",
          "label": "Portrait (4:5)"
        }
      ],
      "label": "Image ratio"
    },
    {
      "type": "range",
      "id": "min_width",
      "label": "Image Min Width",
      "default": 360,
      "min": 200,
      "max": 640,
      "step": 10,
      "unit": "px"
    },
    {
      "type": "header",
      "content": "Layout"
    },
    {
      "type": "radio",
      "id": "mobile_style",
      "label": "Mobile Style",
      "default": "scroll",
      "options": [
        {
          "value": "stack",
          "label": "Stack"
        },
        {
          "value": "scroll",
          "label": "Vertical Scroll"
        }
      ]
    },
    {
      "type": "range",
      "id": "spacing",
      "label": "Spacing",
      "default": 0,
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "px"
    },
    {
      "type": "radio",
      "id": "section_layout",
      "label": "Section Layout",
      "default": "container-bg-full",
      "options": [
        {
          "value": "container-bg-full",
          "label": "Container"
        },
        {
          "value": "fullwidth",
          "label": "Fullwidth"
        }
      ]
    },
    {
      "type": "radio",
      "id": "responsive_visibility",
      "label": "Responsive Visibility",
      "default": "responsive",
      "options": [
        {
          "value": "responsive",
          "label": "Mobile & Desktop"
        },
        {
          "value": "md:hidden",
          "label": "Mobile only"
        },
        {
          "value": "max-md:hidden",
          "label": "Desktop only"
        }
      ]
    },
    {
      "type": "select",
      "id": "padding_top",
      "default": "pt-0",
      "options": [
        {
          "value": "pt-0",
          "label": "None"
        },
        {
          "value": "pt-sm",
          "label": "Small"
        },
        {
          "value": "pt-md",
          "label": "Medium"
        },
        {
          "value": "pt-lg",
          "label": "Large"
        }
      ],
      "label": "Top Padding"
    },
    {
      "type": "select",
      "id": "padding_bottom",
      "default": "pb-0",
      "options": [
        {
          "value": "pb-0",
          "label": "None"
        },
        {
          "value": "pb-sm",
          "label": "Small"
        },
        {
          "value": "pb-md",
          "label": "Medium"
        },
        {
          "value": "pb-lg",
          "label": "Large"
        }
      ],
      "label": "Bottom Padding"
    },
    {
      "type": "select",
      "id": "color_scheme",
      "default": "bg-theme-bg text-theme-text color-inherit",
      "options": [
        {
          "value": "bg-theme-bg text-theme-text color-inherit",
          "label": "Inherit from parent/theme"
        },
        {
          "value": "bg-theme-bg text-theme-text color-group-1",
          "label": "Color group 1"
        },
        {
          "value": "bg-theme-bg text-theme-text color-group-2",
          "label": "Color group 2"
        },
        {
          "value": "bg-theme-bg text-theme-text color-group-3",
          "label": "Color group 3"
        },
        {
          "value": "bg-theme-bg text-theme-text color-group-4",
          "label": "Color group 4"
        },
        {
          "value": "bg-theme-bg text-theme-text color-group-5",
          "label": "Color group 5"
        }
      ],
      "label": "Color scheme"
    },
    {
      "type": "text",
      "id": "sectionID",
      "label": "Section ID"
    }
  ],
  "max_blocks": 6,
  "blocks": [
    {
      "name": "Image",
      "type": "image",
      "settings": [
        {
          "type": "header",
          "content": "Image"
        },
        {
          "type": "image_picker",
          "id": "image",
          "label": "Image"
        },
        {
          "type": "color_background",
          "id": "image__overlay",
          "label": "Image Overlay"
        },
        {
          "type": "url",
          "id": "url",
          "label": "URL",
          "default": "/"
        },
        {
          "type": "header",
          "content": "Optional Content"
        },
        {
          "type": "richtext",
          "id": "title",
          "label": "Title"
        },
        {
          "type": "range",
          "id": "title_font",
          "label": "Title Font",
          "default": 1,
          "min": 1,
          "max": 3,
          "step": 1,
          "info": "Typography Groups 1 - 3"
        },
        {
          "type": "richtext",
          "id": "subtitle_richtext",
          "label": "Subtitle"
        },
        {
          "type": "range",
          "id": "subtitle_font",
          "label": "Subtitle Font",
          "default": 1,
          "min": 1,
          "max": 3,
          "step": 1,
          "info": "Typography Groups 1 - 3"
        },
        {
          "type": "header",
          "content": "Layout"
        },
        {
          "type": "range",
          "id": "border_width",
          "label": "Border Width",
          "default": 0,
          "min": 0,
          "max": 8,
          "step": 1,
          "unit": "px"
        },
        {
          "type": "radio",
          "id": "responsive_visibility",
          "label": "Responsive Visibility",
          "default": "responsive",
          "options": [
            {
              "value": "responsive",
              "label": "Mobile & Desktop"
            },
            {
              "value": "md:hidden",
              "label": "Mobile only"
            },
            {
              "value": "max-md:hidden",
              "label": "Desktop only"
            }
          ]
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Image Feed",
      "settings": {
        "section_layout": "fullwidth"
      },
      "blocks": [
        {
          "type": "image"
        },
        {
          "type": "image"
        },
        {
          "type": "image"
        },
        {
          "type": "image"
        }
      ]
    }
  ]
}
{% endschema %}
